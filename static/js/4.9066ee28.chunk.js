(window["webpackJsonpreact-first"]=window["webpackJsonpreact-first"]||[]).push([[4],{299:function(e,a,s){e.exports={dialogs__wrap:"Dialogs_dialogs__wrap__3XkBp",messages_wrap:"Dialogs_messages_wrap__1TLTe",dialogs:"Dialogs_dialogs__17yrP"}},300:function(e,a,s){e.exports={dialog:"Dialog_dialog__2WcIH",dialog_avatar:"Dialog_dialog_avatar__21v_y",dialog_body:"Dialog_dialog_body__37Pr9",dialog_name:"Dialog_dialog_name__1Z3vb",dialog_message:"Dialog_dialog_message__2DpvB",dialog_date:"Dialog_dialog_date__2fvku",active:"Dialog_active__15CzB"}},301:function(e,a,s){e.exports={messages_form:"Messages_messages_form__3yWwc",typing_wrap:"Messages_typing_wrap__VaomH",messages__wrap:"Messages_messages__wrap__3TZXn",messages:"Messages_messages__5u0PW",messages_textarea:"Messages_messages_textarea__2FCu9",send:"Messages_send__2Yqln"}},302:function(e,a,s){e.exports={message:"Message_message__2g7eV",message_header:"Message_message_header__15HX6",message_name:"Message_message_name__1BIw2",message_text:"Message_message_text__CxvOO",message_date:"Message_message_date__1C7Yr",message_body:"Message_message_body__3lG1a",message_avatar:"Message_message_avatar__1qG2J"}},303:function(e,a,s){e.exports=s.p+"static/media/tg.3f925d6c.png"},312:function(e,a,s){"use strict";s.r(a);var t=s(28),r=s(29),n=s(31),i=s(30),o=s(32),l=s(0),m=s.n(l),c=s(299),d=s.n(c),g=s(300),_=s.n(g),p=s(11),u=function(e){var a,s,t=(a=e.date,s="T",a.split(s));return m.a.createElement("div",{className:_.a.dialog},m.a.createElement(p.b,{to:"/im/".concat(e.id),activeClassName:_.a.active},m.a.createElement("div",{className:_.a.dialog_start},m.a.createElement("div",{className:_.a.dialog_avatar},m.a.createElement("img",{src:e.avatar,alt:"avatar"}))),m.a.createElement("div",{className:_.a.dialog_body},m.a.createElement("div",{className:_.a.dialog_name},e.name),m.a.createElement("div",{className:_.a.dialog_message})),m.a.createElement("div",{className:_.a.dialog_end},m.a.createElement("div",{className:_.a.dialog_date},t[0]))))},f=s(301),h=s.n(f),v=s(302),b=s.n(v),E=s(58),P=s.n(E),y=function(e){var a=e.date.split("T"),s=a[1].split(".");return m.a.createElement("div",{className:"".concat(b.a.message," ").concat(b.a[e.msgClass])},m.a.createElement("div",{className:b.a.message_body},m.a.createElement("div",{className:b.a.message_start},m.a.createElement("div",{className:b.a.message_avatar},e.senderId!==e.authProfile.userId&&m.a.createElement("img",{src:e.resProfile.data.photos.small?e.resProfile.data.photos.small:P.a,alt:"avatar"}),e.senderId===e.authProfile.userId&&m.a.createElement("img",{src:e.authProfile.photos.small?e.authProfile.photos.small:P.a,alt:"avatar"}))),m.a.createElement("div",{className:b.a.message_content},m.a.createElement(p.b,{to:"/profile/"+e.userId,className:b.a.message_name},e.name),m.a.createElement("div",{className:b.a.message_text},e.text))),m.a.createElement("div",{className:b.a.message_date},m.a.createElement("span",null,a[0]),m.a.createElement("span",null,s[0])))},O=s(96),N=s(133),M=s(36),j=s(69),w=s(303),D=s.n(w),I=Object(j.a)(300),x=Object(N.a)({form:"dialogAddMessageForm"})(function(e){return m.a.createElement("form",{onSubmit:e.handleSubmit,className:h.a.messages_form},m.a.createElement(O.a,{component:M.b,validate:[I],placeholder:"Write a message...",className:h.a.messages_textarea,name:"body"}),m.a.createElement("button",{className:h.a.send},m.a.createElement("img",{src:D.a,alt:"send"})))}),k=function(e){var a=e.messages?e.messages.map(function(a){return m.a.createElement(y,{resProfile:e.resProfile,authProfile:e.authProfile,senderId:a.senderId,text:a.body,key:a.id,date:a.addedAt,name:a.senderName})}):"";return m.a.createElement("div",{className:h.a.messages__wrap},m.a.createElement("div",{className:h.a.messages},a),m.a.createElement("div",{className:h.a.typing_wrap},0===a.length&&"\u041d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"),m.a.createElement(x,{onSubmit:function(a){e.openedUserId&&e.sendMessage(e.openedUserId,a.body)}}))},A=s(12),C=s(101),U=s(6),T=s(41),B=function(e){function a(){return Object(t.a)(this,a),Object(n.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(o.a)(a,e),Object(r.a)(a,[{key:"render",value:function(){return m.a.createElement(k,Object.assign({},this.props,{sendMessage:this.props.sendMessage}))}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,a,s){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e&&this.props.getRecipienProfile(e)}}]),a}(m.a.Component),W=Object(U.d)(Object(A.b)(function(e){return{newMessageText:e.dialogsPage.newMessageText,messages:e.dialogsPage.messages,openedUserId:e.dialogsPage.openedUserId,resProfile:e.dialogsPage.resProfile,authProfile:e.profilePage.authProfile}},{sendMessage:C.e,getRecipienProfile:C.d}),T.g)(B),H=function(e){var a=e.dialogs&&e.dialogs.length>0?e.dialogs.map(function(e){return m.a.createElement(u,{name:e.userName,date:e.lastDialogActivityDate,key:e.id,avatar:e.photos.small,id:e.id})}):"";return e.isAuth?m.a.createElement("div",{className:d.a.dialogs__wrap},m.a.createElement("div",{className:d.a.dialogs},a),m.a.createElement("div",{className:d.a.messages_wrap},m.a.createElement(W,{store:e.store}))):m.a.createElement(T.a,{to:"/auth"})},J=function(e){return{isAuth:e.auth.isAuth}},S=function(e){function a(){return Object(t.a)(this,a),Object(n.a)(this,Object(i.a)(a).apply(this,arguments))}return Object(o.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.getDialogs(),this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,a,s){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e&&(this.props.setOpenedUserId(e),this.props.getMessages(e)),e||this.props.setOpenedUserId(null)}},{key:"render",value:function(){return m.a.createElement(H,Object.assign({},this.props,{startDialog:this.props.startDialog}))}}]),a}(m.a.Component);a.default=Object(U.d)(Object(A.b)(function(e){return{dialogs:e.dialogsPage.dialogs,isAuth:e.auth.isAuth}},{getDialogs:C.b,startDialog:C.g,getMessages:C.c,sendMessage:C.e,setOpenedUserId:C.f}),T.g,function(e){var a=function(a){function s(){return Object(t.a)(this,s),Object(n.a)(this,Object(i.a)(s).apply(this,arguments))}return Object(o.a)(s,a),Object(r.a)(s,[{key:"render",value:function(){return this.props.isAuth?m.a.createElement(e,this.props):m.a.createElement(T.a,{to:"/auth"})}}]),s}(m.a.Component);return Object(A.b)(J)(a)})(S)}}]);
//# sourceMappingURL=4.9066ee28.chunk.js.map