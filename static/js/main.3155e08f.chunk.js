(window["webpackJsonpreact-first"]=window["webpackJsonpreact-first"]||[]).push([[0],{101:function(e,t,n){"use strict";n.d(t,"f",function(){return m}),n.d(t,"b",function(){return d}),n.d(t,"g",function(){return g}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return _}),n.d(t,"e",function(){return b});var r=n(5),a=n.n(r),o=n(10),s=n(22),c=n(9),u=n(35);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach(function(t){Object(s.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p={dialogs:null,messages:null,newMessageText:"",openedUserId:null,resProfile:null},f=function(e){return{type:"GET_DIALOGS",dialogs:e}},m=function(e){return{type:"SET_OPENED_USER_ID",userId:e}},d=function(){return function(){var e=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.b.getDialogs();case 2:n=e.sent,t(f(n.data));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.b.startDialog(e);case 2:0===(r=t.sent).data.resultCode&&n(f(r.data));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.b.getMessages(e);case 2:r=t.sent,n({type:"GET_MESSAGES",body:r.data.items});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.b.getRecipienProfile(e);case 2:r=t.sent,n({type:"SET_RECIPIEN_PROFILE",profile:r});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},b=function(e,t){return function(){var n=Object(o.a)(a.a.mark(function n(r){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.b.sendMessage(e,t);case 2:0===n.sent.data.resultCode&&(r(h(e)),r(Object(u.a)("dialogAddMessageForm")));case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_NEW_MESSAGE_TEXT":return l({},e,{newMessageText:t.newText});case"GET_DIALOGS":return l({},e,{dialogs:t.dialogs});case"GET_MESSAGES":return l({},e,{messages:t.body});case"SET_OPENED_USER_ID":return l({},e,{openedUserId:t.userId});case"SET_RECIPIEN_PROFILE":return l({},e,{resProfile:t.profile});default:return e}}},140:function(e,t,n){e.exports=n.p+"static/media/preloader.2f2ad951.gif"},141:function(e,t,n){},143:function(e,t,n){e.exports=n.p+"static/media/logo.4af744be.svg"},15:function(e,t,n){e.exports={nav:"Navbar_nav__1MADn",item:"Navbar_item__EZgoy",active:"Navbar_active__Bd6Ys",page_name:"Navbar_page_name__3OTvq",icon:"Navbar_icon__3wzzw"}},169:function(e,t,n){e.exports=n(297)},19:function(e,t,n){e.exports={inputWrap:"FormsControls_inputWrap__10EAF",form__input_profile:"FormsControls_form__input_profile__RJ916",form__input:"FormsControls_form__input__2mXno",form__input_checkbox:"FormsControls_form__input_checkbox__1NF9i",form__input_file:"FormsControls_form__input_file__2rEND",form__input_textarea:"FormsControls_form__input_textarea__1SOic",formControl:"FormsControls_formControl__2W2k5",error:"FormsControls_error__17pC7"}},21:function(e,t,n){e.exports={userPhoto:"Users_userPhoto__CAeVI",button:"Users_button__3YxD9",cards:"Users_cards__2e5xx",user_card:"Users_user_card__3mAMT"}},24:function(e,t,n){e.exports={menu:"Menu_menu__283Ni",menu__item:"Menu_menu__item__wCTm_",active:"Menu_active__3zFFo",icon:"Menu_icon__1DtVs"}},252:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){},297:function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=n(6),a=n(59),o=n(101),s=n(5),c=n.n(s),u=n(10),i=n(77),l=n(22),p=n(9);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var m=function(e,t,n,r){return e.map(function(e){return e[n]===t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{},r):e})};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var h={users:[],pageSize:16,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},_=function(e){return{type:"FOLLOW-USER",userId:e}},b=function(e){return{type:"UNFOLLOW-USER",userId:e}},E=function(e){return{type:"SET-USERS",users:e}},O=function(e){return{type:"SET-CURRENT-PAGE",pageID:e}},v=function(e){return{type:"SET-TOTAL-USERS",totalCount:e}},w=function(e){return{type:"TOGGLE-IS-FETCHING",isFetching:e}},P=function(e){return{type:"MERGE-USERS-DATA",data:e}},y=function(e,t){return{type:"TOGGLE-IS-FOLLOWING-PROGRESS",isFetching:e,userId:t}},j=function(e,t){return function(){var n=Object(u.a)(c.a.mark(function n(r){var a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r(w(!0)),r(O(e)),n.next=4,p.e.getUsers(e,t);case 4:a=n.sent,r(w(!1)),r(E(a.items)),r(v(a.totalCount));case 8:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},S=function(){var e=Object(u.a)(c.a.mark(function e(t,n,r,a){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(y(!0,n)),e.next=3,r(n);case 3:0===e.sent.data.resultCode&&t(a(n)),t(y(!1,n));case 6:case"end":return e.stop()}},e)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),C=function(e){return function(t){S(t,e,p.e.follow.bind(p.e),_)}},N=function(e){return function(t){S(t,e,p.e.unfollow.bind(p.e),b)}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW-USER":return g({},e,{users:m(e.users,t.userId,"id",{followed:!0})});case"UNFOLLOW-USER":return g({},e,{users:m(e.users,t.userId,"id",{followed:!1})});case"SET-USERS":return g({},e,{users:t.users});case"SET-CURRENT-PAGE":return g({},e,{currentPage:t.pageID});case"SET-TOTAL-USERS":return g({},e,{totalUsersCount:t.totalCount});case"TOGGLE-IS-FETCHING":return g({},e,{isFetching:t.isFetching});case"MERGE-USERS-DATA":return g({},e,{users:t.data});case"TOGGLE-IS-FOLLOWING-PROGRESS":return g({},e,{followingInProgress:t.isFetching?[].concat(Object(i.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter(function(e){return e!=t.userId})});default:return e}},I=n(35);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var D={userId:null,email:null,login:null,isAuth:!1,isFetching:!1,captchaUrl:null},k=function(e){return{type:"SET_CAPTCHA_URL",url:e}},A=function(e,t,n,r){return{type:"SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:r}}},F=function(){return function(){var e=Object(u.a)(c.a.mark(function e(t){var n,r,a,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.getAuthMe();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,a=r.id,o=r.login,s=r.email,t(A(a,s,o,!0)));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},R=function(){return function(){var e=Object(u.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.d.getCaptcha();case 2:n=e.sent,r=n.data.url,t(k(r));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return x({},e,{},t.payload,{isAuth:!0});case"LOGOUT":return x({},e,{isAuth:!1});case"SET_CAPTCHA_URL":return x({},e,{captchaUrl:t.url});default:return e}},L=n(136),M=n(134);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var W={initialized:!1},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SECCESS":return H({},e,{initialized:!0});default:return e}},X=Object(r.c)({profilePage:a.b,dialogsPage:o.a,usersPage:U,auth:G,app:q,form:M.a}),V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.d,B=Object(r.e)(X,V(Object(r.a)(L.a)));window.store=B;var J=B,Q=n(0),Y=n.n(Q),Z=n(68),K=n.n(Z),$=(n(252),n(253),n(28)),ee=n(29),te=n(31),ne=n(30),re=n(32),ae=(n(254),n(15)),oe=n.n(ae),se=n(11),ce=n(72),ue=n.n(ce),ie=n(73),le=n.n(ie),pe=n(74),fe=n.n(pe),me=function(){return Y.a.createElement("nav",{className:oe.a.nav},Y.a.createElement("ul",null,Y.a.createElement("li",{className:"".concat(oe.a.item," ").concat(oe.a.active)},Y.a.createElement(se.b,{to:"/profile",activeClassName:oe.a.active},Y.a.createElement("span",{className:oe.a.icon},Y.a.createElement("img",{src:ue.a,alt:"home"})),Y.a.createElement("span",{className:oe.a.page_name},"\u041c\u043e\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"))),Y.a.createElement("li",{className:oe.a.item},Y.a.createElement(se.b,{to:"/im",activeClassName:oe.a.active},Y.a.createElement("span",{className:oe.a.icon},Y.a.createElement("img",{src:le.a,alt:"home"})),Y.a.createElement("span",{className:oe.a.page_name},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"))),Y.a.createElement("li",{className:oe.a.item},Y.a.createElement(se.b,{to:"/users",activeClassName:oe.a.active},Y.a.createElement("span",{className:oe.a.icon},Y.a.createElement("img",{src:fe.a,alt:"home"})),Y.a.createElement("span",{className:oe.a.page_name},"\u041b\u044e\u0434\u0438")))))},de=n(41),ge=n(12),he=n(44),_e=n(21),be=n.n(_e),Ee=n(102),Oe=n(57),ve=n.n(Oe),we=function(e){for(var t=e.totalUsersCount,n=e.pageSize,r=e.currentPage,a=e.onPageChanged,o=e.portionSize,s=void 0===o?10:o,c=Math.ceil(t/n),u=[],i=Math.ceil(c/s),l=Object(Q.useState)(1),p=Object(Ee.a)(l,2),f=p[0],m=p[1],d=(f-1)*s+1,g=f*s,h=1;h<=c;h++)u.push(h);var _=function(e){"prev"===e?(d==r&&m(f-1),a(r-1)):"next"===e&&(g==r&&m(f+1),a(r+1))};return Y.a.createElement("div",{className:ve.a.pagination},f>1&&Y.a.createElement("a",{href:null,onClick:function(){_("prev")},className:ve.a.pagination__button}," Prev "),u.filter(function(e){return e>=d&&e<=g}).map(function(e){return Y.a.createElement("span",{onClick:function(){a(e)},key:e,className:r===e?ve.a.active:""},e)}),i>f&&Y.a.createElement("a",{href:null,onClick:function(){_("next")},className:ve.a.pagination__button}," Next "))},Pe=n(58),ye=n.n(Pe),je=function(e){var t=e.user,n=e.followingInProgress,r=e.follow,a=e.unfollow;return Y.a.createElement("div",{className:be.a.user_card},Y.a.createElement("div",{className:be.a.user_card_top},Y.a.createElement("div",{className:be.a.user_avatar_wrap},Y.a.createElement(se.b,{to:"/profile/"+t.id},Y.a.createElement("img",{src:null!=t.photos.small?t.photos.small:ye.a,alt:"avatar",className:be.a.userPhoto}))),Y.a.createElement("div",{className:be.a.user_content},Y.a.createElement("p",null," ",t.name," "))),Y.a.createElement("div",{className:be.a.user_follow},t.followed?Y.a.createElement("button",{disabled:n.some(function(e){return e===t.id}),className:be.a.button,onClick:function(){a(t.id)}},"unfollow"):Y.a.createElement("button",{disabled:n.some(function(e){return e===t.id}),className:be.a.button,onClick:function(){r(t.id)}},"follow")))},Se=function(e){var t=e.currentPage,n=e.onPageChanged,r=e.totalUsersCount,a=e.pageSize,o=e.users,s=e.followingInProgress,c=e.unfollow,u=e.follow;Object(he.a)(e,["currentPage","onPageChanged","totalUsersCount","pageSize","users","followingInProgress","unfollow","follow"]);return Y.a.createElement("div",null,Y.a.createElement("div",{className:be.a.cards},o.map(function(e){return Y.a.createElement(je,{user:e,followingInProgress:s,follow:u,unfollow:c,key:e.id})})),Y.a.createElement(we,{currentPage:t,onPageChanged:n,totalUsersCount:r,pageSize:a}))},Ce=n(33),Ne=n(142),Ue=Object(Ne.a)(function(e){return e.usersPage.users},function(e){return e}),Ie=function(e){return e.usersPage.pageSize},Te=function(e){return e.usersPage.totalUsersCount},xe=function(e){return e.usersPage.currentPage},De=function(e){return e.usersPage.isFetching},ke=function(e){return e.usersPage.followingInProgress},Ae=function(e){function t(){var e,n;Object($.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(te.a)(this,(e=Object(ne.a)(t)).call.apply(e,[this].concat(a)))).onPageChanged=function(e){n.props.requestUsers(e,n.props.pageSize)},n}return Object(re.a)(t,e),Object(ee.a)(t,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Y.a.createElement(Y.a.Fragment,null,this.props.isFetching?Y.a.createElement(Ce.a,null):null,Y.a.createElement(Se,{users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,isFetching:this.isFetching,followingInProgress:this.props.followingInProgress}))}}]),t}(Y.a.Component),Fe=Object(r.d)(Object(ge.b)(function(e){return{users:Ue(e),pageSize:Ie(e),totalUsersCount:Te(e),currentPage:xe(e),isFetching:De(e),followingInProgress:ke(e)}},{follow:C,unfollow:N,setUsers:E,setCurrentPage:O,setTotalUsers:v,toggleIsFetching:w,mergeUsersData:P,requestUsers:j}))(Ae),Re=n(34),Ge=n.n(Re),Le=n(143),Me=n.n(Le),ze=function(e){return Y.a.createElement("header",{className:Ge.a.header},Y.a.createElement("div",{className:"container"},Y.a.createElement("div",{className:Ge.a.header__body},Y.a.createElement(se.b,{to:"/",className:Ge.a.logo},Y.a.createElement("img",{src:Me.a,alt:"logo"})),Y.a.createElement("div",{className:Ge.a.profile},e.isAuth?Y.a.createElement("button",{className:Ge.a.profile__content},Y.a.createElement("div",{className:Ge.a.name}," ",e.login," "),Y.a.createElement("div",{className:Ge.a.avatar},e.profile?Y.a.createElement("img",{src:null!=e.profile.photos.small?e.profile.photos.small:ye.a,alt:"avatar"}):Y.a.createElement(Ce.a,null)),Y.a.createElement("div",{className:Ge.a.dropdown},Y.a.createElement("a",{onClick:function(){e.logout()}},"\u0412\u044b\u0439\u0442\u0438"))):Y.a.createElement("div",{className:Ge.a.link},Y.a.createElement(se.b,{to:"/auth"},"\u0412\u043e\u0439\u0442\u0438"))))))},He=function(e){function t(){return Object($.a)(this,t),Object(te.a)(this,Object(ne.a)(t).apply(this,arguments))}return Object(re.a)(t,e),Object(ee.a)(t,[{key:"componentDidMount",value:function(){this.props.isAuth&&this.props.getAuthProfile(this.props.userId)}},{key:"render",value:function(){return Y.a.createElement(ze,Object.assign({},this.props,{logout:this.props.logout}))}}]),t}(Y.a.Component);Object(de.g)(He);var We=Object(ge.b)(function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,userId:e.auth.userId,profile:e.profilePage.authProfile}},{logout:function(){return function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.logout();case 2:0===e.sent.data.resultCode&&(t(A(null,null,null,!1)),t({type:"LOGOUT"}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},getAuthProfile:a.c})(He),qe=n(78),Xe=n.n(qe),Ve=n(19),Be=n.n(Ve),Je=n(133),Qe=n(36),Ye=n(69),Ze=Object(Je.a)({form:"login"})(function(e){var t=e.handleSubmit,n=e.error,r=e.captchaUrl;return Y.a.createElement("form",{className:Xe.a.auth_form,onSubmit:t},Object(Qe.c)("Email","email",[Ye.b],Qe.a,{id:"email",className:Be.a.form__input}),Object(Qe.c)("Password","password",[Ye.b],Qe.a,{type:"password",id:"password",className:Be.a.form__input}),Y.a.createElement("label",{htmlFor:"rememberMe"},"Remember Me"),Object(Qe.c)(null,"rememberMe",[],Qe.a,{type:"checkbox",id:"rememberMe",className:Be.a.form__input_checkbox}),n?Y.a.createElement("div",{className:Xe.a.formError}," ",n," "):"",r&&Y.a.createElement("div",{className:Xe.a.captcha},Y.a.createElement("img",{src:r,alt:"captcha",className:Be.a.captcha}),Object(Qe.c)("Captcha","captcha",[Ye.b],Qe.a,{className:Be.a.form__input_captcha})),Y.a.createElement("button",{type:"submit"},"\u0412\u0445\u043e\u0434"))}),Ke=function(e){return e.isAuth?Y.a.createElement(de.a,{to:"/profile"}):Y.a.createElement("div",null,Y.a.createElement(Ze,{captchaUrl:e.captchaUrl,onSubmit:function(t){alert(t.email+" "+t.password),e.login(t)}}))},$e=function(e){function t(){return Object($.a)(this,t),Object(te.a)(this,Object(ne.a)(t).apply(this,arguments))}return Object(re.a)(t,e),Object(ee.a)(t,[{key:"render",value:function(){return Y.a.createElement(Ke,Object.assign({},this.props,{login:this.props.login}))}}]),t}(Y.a.Component),et=Object(r.d)(Object(ge.b)(function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}},{login:function(e){return function(){var t=Object(u.a)(c.a.mark(function t(n){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.login(e);case 2:0===(r=t.sent).data.resultCode?(n(F()),n(k(null))):(10===r.data.resultCode&&n(R()),a=r.data.messages.length>0?r.data.messages:"Some error",n(Object(I.b)("login",{_error:a})));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}))($e),tt=function(e){return function(t){return Y.a.createElement(Y.a.Suspense,{fallback:Y.a.createElement(Ce.a,null)},Y.a.createElement(e,t))}},nt=function(e){var t=e.currentPage,n=e.onPageChanged,r=e.totalUsersCount,a=e.pageSize,o=e.users,s=e.followingInProgress,c=e.unfollow,u=e.follow;Object(he.a)(e,["currentPage","onPageChanged","totalUsersCount","pageSize","users","followingInProgress","unfollow","follow"]);return Y.a.createElement("div",null,Y.a.createElement(we,{currentPage:t,onPageChanged:n,totalUsersCount:r,pageSize:a}),Y.a.createElement("div",{className:be.a.cards},o.filter(function(e){return e.followed}).map(function(e){return Y.a.createElement(je,{user:e,followingInProgress:s,follow:u,unfollow:c,key:e.id})})))},rt=function(e){function t(){var e,n;Object($.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(te.a)(this,(e=Object(ne.a)(t)).call.apply(e,[this].concat(a)))).onPageChanged=function(e){n.props.requestUsers(e,n.props.pageSize)},n}return Object(re.a)(t,e),Object(ee.a)(t,[{key:"componentDidMount",value:function(){this.props.requestUsers(this.props.currentPage,this.props.pageSize),this.setFriends()}},{key:"setFriends",value:function(){if(this.props.users&&this.props.users.length){this.props.requestUsers(1,this.props.totalUsersCount);this.props.users.filter(function(e){return!0===e.followed})}}},{key:"componentDidUpdate",value:function(e,t,n){this.props.users!==e.users&&this.setFriends()}},{key:"render",value:function(){return Y.a.createElement(Y.a.Fragment,null,this.props.isFetching?Y.a.createElement(Ce.a,null):null,Y.a.createElement(nt,{users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,isFetching:this.isFetching,followingInProgress:this.props.followingInProgress}))}}]),t}(Y.a.Component),at=Object(r.d)(Object(ge.b)(function(e){return{users:Ue(e),pageSize:Ie(e),totalUsersCount:Te(e),currentPage:xe(e),isFetching:De(e),followingInProgress:ke(e)}},{follow:C,unfollow:N,setUsers:E,setCurrentPage:O,setTotalUsers:v,toggleIsFetching:w,mergeUsersData:P,requestUsers:j}))(rt),ot=n(24),st=n.n(ot),ct=function(){return Y.a.createElement("ul",{className:st.a.menu},Y.a.createElement("li",{className:"".concat(st.a.menu__item," ").concat(st.a.active)},Y.a.createElement(se.b,{to:"/profile",activeClassName:st.a.active},Y.a.createElement("span",{className:st.a.icon},Y.a.createElement("img",{src:ue.a,alt:"home"})))),Y.a.createElement("li",{className:st.a.menu__item},Y.a.createElement(se.b,{to:"/im",activeClassName:st.a.active},Y.a.createElement("span",{className:st.a.icon},Y.a.createElement("img",{src:le.a,alt:""})))),Y.a.createElement("li",{className:st.a.menu__item},Y.a.createElement(se.b,{to:"/users",activeClassName:st.a.active},Y.a.createElement("span",{className:st.a.icon},Y.a.createElement("img",{src:fe.a,alt:""})))))},ut=Y.a.lazy(function(){return n.e(4).then(n.bind(null,312))}),it=Y.a.lazy(function(){return n.e(3).then(n.bind(null,311))}),lt=function(e){function t(){return Object($.a)(this,t),Object(te.a)(this,Object(ne.a)(t).apply(this,arguments))}return Object(re.a)(t,e),Object(ee.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Y.a.createElement("div",{className:"app-wrapper"},Y.a.createElement(We,null),Y.a.createElement("div",{className:"app-container"},Y.a.createElement(me,null),Y.a.createElement("div",{className:"app-content"},Y.a.createElement(de.d,null,Y.a.createElement(de.b,{path:"/im/:userId?",render:tt(ut)}),Y.a.createElement(de.b,{path:"/profile/:userId?",render:tt(it)}),Y.a.createElement(de.b,{path:"/users",render:tt(Fe)}),Y.a.createElement(de.b,{path:"/auth",render:tt(et)}),Y.a.createElement(de.b,{path:"/friends",render:tt(at)}),Y.a.createElement(de.a,{from:"/",to:"/profile/"}),Y.a.createElement(de.b,{path:"*",render:function(){return Y.a.createElement("div",null,"404 not found!")}})))),Y.a.createElement(ct,null)):Y.a.createElement(Ce.a,null)}}]),t}(Q.Component),pt=Object(r.d)(de.g,Object(ge.b)(function(e){return{initialized:e.app.initialized}},{initializeApp:function(){return function(e){var t=e(F());Promise.all([t]).then(function(){e({type:"INITIALIZED_SECCESS"})})}}}))(lt),ft=function(){return Y.a.createElement(se.a,null,Y.a.createElement(ge.a,{store:J},Y.a.createElement(pt,null)))};K.a.render(Y.a.createElement(ft,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},33:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(140),s=n.n(o),c=n(141),u=n.n(c);t.a=function(){return a.a.createElement("div",{className:u.a.preloader},a.a.createElement("img",{src:s.a}))}},34:function(e,t,n){e.exports={header:"Header_header__3Dqzt",header__body:"Header_header__body__SIXBi",profile:"Header_profile__1tgQB",avatar:"Header_avatar__Gq7YQ",profile__content:"Header_profile__content__2ukkm",dropdown:"Header_dropdown__3KQy4",name:"Header_name__3IAxW",logo:"Header_logo__1cGoR",link:"Header_link__AbDvX"}},36:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return l}),n.d(t,"c",function(){return p});var r=n(44),a=n(0),o=n.n(a),s=n(19),c=n.n(s),u=n(96),i=function(e){var t=e.input,n=e.meta,a=Object(r.a)(e,["input","meta"]),s=n.touched&&n.error;return o.a.createElement("div",{className:c.a.formControl+" "+(s?c.a.error:"")},o.a.createElement("div",{className:c.a.inputWrap},o.a.createElement("textarea",Object.assign({},t,a))),s&&o.a.createElement("span",null,n.error))},l=function(e){var t=e.input,n=e.meta,a=Object(r.a)(e,["input","meta"]),s=n.touched&&n.error;return o.a.createElement("div",{className:c.a.formControl+" "+(s?c.a.error:"")},o.a.createElement("div",{className:c.a.inputWrap},o.a.createElement("input",Object.assign({},t,a))),s&&o.a.createElement("span",null,n.error))},p=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};arguments.length>5&&void 0!==arguments[5]&&arguments[5];return o.a.createElement(u.a,Object.assign({placeholder:e,name:t,validate:n,component:r},a))}},57:function(e,t,n){e.exports={pagination:"Paginator_pagination__cQ3M-",active:"Paginator_active__2jlXV",pagination__button:"Paginator_pagination__button__2PN8h"}},58:function(e,t,n){e.exports=n.p+"static/media/default_avatar.7929e119.png"},59:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"h",function(){return d}),n.d(t,"i",function(){return g}),n.d(t,"d",function(){return _}),n.d(t,"c",function(){return b}),n.d(t,"e",function(){return E}),n.d(t,"j",function(){return O}),n.d(t,"g",function(){return v}),n.d(t,"f",function(){return w});var r=n(5),a=n.n(r),o=n(10),s=n(77),c=n(22),u=n(9),i=n(35);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){Object(c.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f={posts:[{id:1,message:"This is my first post",likesCount:3},{id:2,message:"Hi, I'm learning ReactJs",likesCount:5}],profile:null,authProfile:null,showMoreInfo:!1,status:""},m=function(e){return{type:"ADD_POST",text:e}},d=function(e){return{type:"SET_USER_PROFILE",profile:e}},g=function(){return{type:"TOGGLE_USER_INFO"}},h=function(e){return{type:"SET_STATUS",status:e}},_=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.getProfile(e);case 2:r=t.sent,n(d(r));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.getProfile(e);case 2:r=t.sent,n({type:"SET_AUTH_USER_PROFILE",profile:r});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.getStatus(e);case 2:r=t.sent,n(h(r.data));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(h(e));case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.c.setUserAvatar(e);case 2:0===(r=t.sent).data.resultCode&&n({type:"SAVE_PHOTO_SUCCESS",photos:r.data.data.photos});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(o.a)(a.a.mark(function t(n,r){var o,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r().auth.userId,t.next=3,u.c.saveProfile(e);case 3:if(0!==(s=t.sent).data.resultCode){t.next=8;break}n(_(o)),t.next=11;break;case 8:return s.data.messages.length>0?s.data.messages:"Some error",n(Object(i.b)("edit-profile-data",{_error:s.data.messages[0]})),t.abrupt("return",Promise.reject({_error:s.data.messages[0]}));case 11:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var n={id:3,message:t.text,likesCount:0};return p({},e,{posts:[].concat(Object(s.a)(e.posts),[n])});case"UPDATE_NEW_POST_TEXT":return p({},e,{newPostText:t.newPostText});case"SET_USER_PROFILE":return p({},e,{profile:t.profile});case"SET_AUTH_USER_PROFILE":return p({},e,{authProfile:t.profile});case"TOGGLE_USER_INFO":return p({},e,{showMoreInfo:!e.showMoreInfo});case"SET_STATUS":return p({},e,{status:t.status});case"DELETE_POST":return p({},e,{posts:e.posts.filter(function(e){return e.id!=t.postId})});case"SAVE_PHOTO_SUCCESS":return p({},e,{profile:p({},e.profile,{photos:t.photos})});default:return e}}},69:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r=function(e){if(!e)return"Field is required!"},a=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}}},72:function(e,t,n){e.exports=n.p+"static/media/home_icon.b123d032.svg"},73:function(e,t,n){e.exports=n.p+"static/media/messages_icon.8c026abd.svg"},74:function(e,t,n){e.exports=n.p+"static/media/users_icon.f7f35c61.svg"},78:function(e,t,n){e.exports={auth_form:"Auth_auth_form__2GuG-",formError:"Auth_formError__1l4UV"}},9:function(e,t,n){"use strict";n.d(t,"e",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return i});var r=n(135),a=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"4dd11e25-4d13-4146-a568-3123d3b64f3e"}}),o={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a.get("users?page=".concat(e,"&count=").concat(t)).then(function(e){return e.data})},follow:function(e){return a.post("follow/"+e)},unfollow:function(e){return a.delete("follow/"+e)}},s={getAuthMe:function(){return a.get("auth/me")},login:function(e){return a.post("auth/login",e)},logout:function(){return a.delete("auth/login")}},c={getCaptcha:function(){return a.get("security/get-captcha-url")}},u={getDialogs:function(){return a.get("dialogs")},startDialog:function(e){return a.put("dialogs/"+e)},sendMessage:function(e,t){return a.post("dialogs/"+e+"/messages",{body:t})},getMessages:function(e){return a.get("dialogs/"+e+"/messages")},getRecipienProfile:function(e){return a.get("profile/"+e)}},i={getProfile:function(e){return a.get("profile/"+e).then(function(e){return e.data})},getStatus:function(e){return a.get("profile/status/"+e)},updateStatus:function(e){return a.put("profile/status",{status:e})},setUserAvatar:function(e){var t=new FormData;return t.append("image",e),a.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return a.put("profile",e)}}}},[[169,1,2]]]);
//# sourceMappingURL=main.3155e08f.chunk.js.map